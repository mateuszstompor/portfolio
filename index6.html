<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Parallax Website</title>
  <style>
    :root {
      --accent: #ff6b6b;
      --text: #222;
      --muted: #666;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: var(--text);
      line-height: 1.5;
    }

    header {
      position: sticky;
      top: 0;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(6px);
      padding: 0.6rem 1rem;
      z-index: 50;
      border-bottom: 1px solid #eee;
    }
    header .brand { font-weight: 700; color: var(--accent); }

    /* Parallax section container */
    .parallax {
      position: relative;
      height: 70vh;
      min-height: 360px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
    }

    /* Background layer that will move */
    .parallax .bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      /* make background taller than container to allow movement */
      height: 130%;
      background-position: center;
      background-size: cover;
      will-change: transform;
      transform: translate3d(0,0,0);
    }

    /* Content inside parallax (stays above bg) */
    .parallax .inner {
      position: relative;
      z-index: 10;
      padding: 2rem;
      text-shadow: 0 6px 20px rgba(0,0,0,0.45);
    }
    .parallax h1 { margin: 0 0 0.4rem; font-size: clamp(1.6rem, 4vw, 3rem); }
    .parallax p { margin: 0; font-size: clamp(1rem, 2.1vw, 1.2rem); opacity: 0.95; }

    /* Regular content sections */
    .content {
      padding: 4rem 1rem;
      max-width: 960px;
      margin: 0 auto;
    }
    .cards {
      display: grid;
      gap: 1rem;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }
    .card {
      background: #fff;
      border-radius: 8px;
      padding: 1rem;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    }

    footer {
      padding: 2rem 1rem;
      text-align: center;
      color: var(--muted);
      font-size: 0.95rem;
    }

    /* On small screens, disable extra bg height to reduce off-screen painting */
    @media (max-width: 767px) {
      .parallax { height: 50vh; min-height: 280px; }
      .parallax .bg { height: 110%; }
    }
  </style>
</head>
<body>

  <header>
    <div style="display:flex;align-items:center;gap:1rem;">
      <div class="brand">Parallax demo</div>
      <nav style="margin-left:auto;opacity:0.8;font-size:0.95rem;">
        <a href="#features" style="margin-right:1rem;color:inherit;text-decoration:none;">Features</a>
        <a href="#more" style="color:inherit;text-decoration:none;">More</a>
      </nav>
    </div>
  </header>

  <!-- Parallax hero -->
  <section class="parallax" data-speed="0.35">
    <div class="bg" style="background-image: url('https://images.unsplash.com/photo-1501769214405-5e89f2f8f86b?q=80&w=1600&auto=format&fit=crop');"></div>
    <div class="inner">
      <h1>Simple Parallax Effect</h1>
      <p>Lightweight, responsive parallax using requestAnimationFrame.</p>
    </div>
  </section>

  <section class="content" id="features">
    <h2 style="margin-top:0;">Features</h2>
    <p style="color:var(--muted);">This example demonstrates a layered parallax: the background moves slower than the page content.</p>
    <div class="cards" style="margin-top:1rem;">
      <div class="card"><strong>Smooth</strong><p style="margin:0.5rem 0 0;color:var(--muted)">Uses requestAnimationFrame for smooth updates.</p></div>
      <div class="card"><strong>Responsive</strong><p style="margin:0.5rem 0 0;color:var(--muted)">Disabled on small screens for better UX.</p></div>
      <div class="card"><strong>Customizable</strong><p style="margin:0.5rem 0 0;color:var(--muted)">Speed per section via data-speed attribute.</p></div>
    </div>
  </section>

  <!-- Another parallax section -->
  <section class="parallax" data-speed="0.18">
    <div class="bg" style="background-image: url('https://images.unsplash.com/photo-1470770841072-f978cf4d019e?q=80&w=1600&auto=format&fit=crop');"></div>
    <div class="inner">
      <h1>Another Layer</h1>
      <p>Set a different data-speed to vary the parallax amount.</p>
    </div>
  </section>

  <section class="content" id="more">
    <h2>More content</h2>
    <p style="color:var(--muted)">Add as many parallax sections as you like. Replace the images, tweak speeds, or change heights.</p>
  </section>

  <footer>
    © Simple Parallax — tweak and reuse
  </footer>

  <script>
    (function () {
      const parallaxSections = Array.from(document.querySelectorAll('.parallax'));
      // Exit early if no parallax sections
      if (!parallaxSections.length) return;

      // Disable effect on small screens for usability/performance
      const isDisabled = () => window.innerWidth < 768;

      // Build an array of objects with section element, its bg, and speed
      const items = parallaxSections.map(section => {
        const bg = section.querySelector('.bg');
        const speed = parseFloat(section.dataset.speed) || 0.5;
        return { section, bg, speed };
      });

      let ticking = false;

      function update() {
        ticking = false;
        if (isDisabled()) {
          // Reset transforms when disabled
          items.forEach(it => it.bg.style.transform = 'translate3d(0,0,0)');
          return;
        }

        for (const it of items) {
          const rect = it.section.getBoundingClientRect();
          // rect.top is relative to viewport. Multiply by speed to get parallax offset.
          const y = rect.top * it.speed;
          // Apply translate. Using translate3d triggers GPU acceleration.
          it.bg.style.transform = `translate3d(0, ${y}px, 0)`;
        }
      }

      function onScroll() {
        if (!ticking) {
          window.requestAnimationFrame(update);
          ticking = true;
        }
      }

      // Initial update so backgrounds are positioned correctly on load
      update();

      window.addEventListener('scroll', onScroll, { passive: true });
      window.addEventListener('resize', onScroll, { passive: true });
    })();
  </script>
</body>
</html>